<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>GRN-Atlas | Gene Regulatory Network Portal</title>
  <meta name="description" content="A curated portal for downloading and browsing gene regulatory networks (GRNs) across species, data sources, and tissues." />
  <meta name="theme-color" content="#0f172a" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#0b1020;             /* header gradient start */
      --bg2:#0f3d5e;            /* header gradient end */
      --surface:#ffffff;        /* cards */
      --muted:#6b7280;          /* secondary text */
      --text:#111827;           /* body text */
      --brand:#2563eb;          /* primary */
      --brand-2:#22c55e;        /* accent */
      --chip:#eef2ff;           /* tag bg */
      --chip-text:#3730a3;      /* tag text */
      --border:#e5e7eb;         /* lines */
      --shadow:0 10px 30px rgba(17,24,39,.08);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;color:var(--text);background:#f8fafc;}
    a{color:var(--brand);text-decoration:none}
    .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0}

    /* Header */
    header{position:sticky;top:0;z-index:50;background:linear-gradient(135deg,var(--bg),var(--bg2));color:#fff;box-shadow:0 2px 10px rgba(0,0,0,.12)}
    .nav{max-width:1200px;margin:0 auto;display:flex;align-items:center;justify-content:space-between;padding:14px 20px}
    .logo{display:flex;align-items:center;gap:10px;font-weight:700;font-size:1.1rem;color:#fff}
    .logo .dna{font-size:1.35rem}
    .nav a{color:#e5e7eb;margin-left:18px;font-weight:500}
    .nav a:hover{color:#fff}

    /* Hero */
    .hero{position:relative;overflow:hidden}
    .hero-wrap{max-width:1200px;margin:0 auto;padding:48px 20px;display:grid;grid-template-columns:1.4fr 1fr;gap:28px;align-items:center}
    .hero h1{margin:0 0 10px;font-size:2.2rem;color:#fff}
    .hero p{margin:0;color:#d1d5db}
    .stats{display:flex;gap:28px;margin-top:20px}
    .stat{background:rgba(255,255,255,.09);border:1px solid rgba(255,255,255,.18);backdrop-filter: blur(6px);padding:12px 16px;border-radius:10px}
    .stat b{display:block;color:#fff;font-size:1.3rem}

    /* Filters */
    .container{max-width:1200px;margin:0 auto;padding:26px 20px}
    .panel{background:var(--surface);border:1px solid var(--border);border-radius:14px;box-shadow:var(--shadow);padding:18px}
    .panel h2{margin:0 0 14px;color:#0f172a;font-size:1.25rem}
    .filters{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:14px}
    .filters label{display:block;font-size:.85rem;color:#374151;margin-bottom:6px;font-weight:600}
    select,input[type="text"]{width:100%;padding:10px 12px;border:1.5px solid var(--border);border-radius:10px;background:#fff;font-size:.95rem}
    select:focus,input[type="text"]:focus{outline:none;border-color:var(--brand);box-shadow:0 0 0 3px rgba(37,99,235,.12)}
    .actions{margin-top:12px;display:flex;gap:12px;flex-wrap:wrap}
    .btn{border:0;border-radius:10px;padding:10px 14px;font-weight:600;cursor:pointer}
    .btn-primary{background:linear-gradient(135deg,var(--brand),#1d4ed8);color:#fff}
    .btn-secondary{background:#f3f4f6;color:#111827}

    /* Taxonomy sections */
    .tax-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(320px,1fr));gap:16px;margin-top:18px}
    details.group{background:#fff;border:1px solid var(--border);border-radius:14px;box-shadow:var(--shadow)}
    details>summary{list-style:none;padding:14px 16px;cursor:pointer;display:flex;align-items:center;justify-content:space-between;font-weight:700}
    details>summary::-webkit-details-marker{display:none}
    .pill{font-size:.75rem;background:var(--chip);color:var(--chip-text);border-radius:999px;padding:4px 10px;margin-left:8px}
    .group-inner{padding:4px 12px 14px}

    /* Dataset cards */
    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(320px,1fr));gap:16px}
    .card{background:#fff;border:1px solid var(--border);border-radius:14px;padding:14px;box-shadow:var(--shadow);display:flex;flex-direction:column;gap:10px}
    .card h3{margin:0;font-size:1.05rem}
    .meta{display:flex;flex-wrap:wrap;gap:8px}
    .tag{background:#f1f5f9;border:1px solid #e2e8f0;border-radius:999px;padding:4px 10px;font-size:.78rem;color:#334155}
    .row{display:flex;align-items:center;justify-content:space-between;gap:12px}
    .row .left{display:flex;flex-wrap:wrap;gap:8px}
    .download{display:inline-flex;align-items:center;gap:8px}
    .download .btn{padding:9px 12px}

    /* Footer */
    footer{margin-top:40px;background:#0b1324;color:#cbd5e1}
    .foot{max-width:1200px;margin:0 auto;padding:28px 20px;display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:20px}
    footer a{color:#93c5fd}
    .copyright{border-top:1px solid rgba(148,163,184,.2);text-align:center;padding:12px 0;color:#94a3b8}

    /* Utilities */
    .hide{display:none !important}
  </style>
  <!-- Structured data for better indexing/citation -->
  <script type="application/ld+json" id="schema-dataset-template">
  {
    "@context": "https://schema.org",
    "@type": "Dataset",
    "name": "GRN-Atlas",
    "description": "A curated collection of GRNs across species and data sources (bulk RNA-seq, unpaired scRNA/scATAC, and sc-multiome).",
    "url": "https://<your-github-username>.github.io/grn-atlas/",
    "license": "https://creativecommons.org/licenses/by/4.0/",
    "creator": [{"@type":"Organization","name":"GRN-Atlas"}],
    "isAccessibleForFree": true
  }
  </script>
</head>
<body>
  <!-- Header / Nav -->
  <header class="hero">
    <nav class="nav" aria-label="Primary">
      <a class="logo" href="#"><span class="dna" aria-hidden>ðŸ§¬</span> GRNâ€‘Atlas</a>
      <div class="links">
        <a href="#catalog">Catalog</a>
        <a href="#about">About</a>
        <a href="#cite">Cite</a>
        <a href="#contact">Contact</a>
      </div>
    </nav>
    <div class="hero-wrap">
      <div>
        <h1>Gene Regulatory Network Portal</h1>
        <p>Browse and download highâ€‘quality GRNs across <b>species</b>, <b>data sources</b>, and <b>tissues</b>. Each entry includes metadata (cell types, modality, versions) and a citable Figshare link.</p>
        <div class="stats" role="list" aria-label="Quick stats">
          <div class="stat" role="listitem"><b id="stat-datasets">â€”</b><span class="muted">datasets</span></div>
          <div class="stat" role="listitem"><b id="stat-species">â€”</b><span class="muted">species</span></div>
          <div class="stat" role="listitem"><b id="stat-tissues">â€”</b><span class="muted">tissues</span></div>
        </div>
      </div>
      <div aria-hidden>
        <!-- Decorative SVG -->
        <svg viewBox="0 0 400 300" width="100%" height="100%" preserveAspectRatio="xMidYMid meet">
          <defs>
            <linearGradient id="g" x1="0" x2="1" y1="0" y2="1">
              <stop offset="0%" stop-color="#60a5fa"/><stop offset="100%" stop-color="#34d399"/>
            </linearGradient>
          </defs>
          <g fill="none" stroke="url(#g)" stroke-width="2" opacity="0.6">
            <path d="M0 150 Q 80 80 160 150 T 320 150 T 480 150"/>
            <path d="M0 110 Q 80 180 160 110 T 320 110 T 480 110"/>
          </g>
        </svg>
      </div>
    </div>
  </header>

  <!-- Filters & Catalog -->
  <main id="catalog" class="container">
    <section class="panel" aria-labelledby="filters-heading">
      <h2 id="filters-heading">Search & Filter</h2>
      <div class="filters">
        <div>
          <label for="species">Species</label>
          <select id="species">
            <option value="">All species</option>
            <option value="human">Human</option>
            <option value="mouse">Mouse</option>
          </select>
        </div>
        <div>
          <label for="source">Data source</label>
          <select id="source">
            <option value="">All sources</option>
            <option value="bulk">Bulk RNAâ€‘seq</option>
            <option value="unpaired">Unpaired scRNAâ€‘seq & scATACâ€‘seq</option>
            <option value="multiome">scâ€‘Multiome</option>
          </select>
        </div>
        <div>
          <label for="tissue">Tissue / system</label>
          <select id="tissue">
            <option value="">All tissues</option>
          </select>
        </div>
        <div>
          <label for="keyword">Keyword</label>
          <input type="text" id="keyword" placeholder="Gene / pathway / note â€¦" />
        </div>
      </div>
      <div class="actions">
        <button class="btn btn-primary" id="applyFilters">Apply filters</button>
        <button class="btn btn-secondary" id="resetFilters" aria-label="Reset filters">Reset</button>
      </div>
    </section>

    <section aria-labelledby="taxonomy">
      <h2 id="taxonomy" class="sr-only">Taxonomy</h2>
      <div id="taxonomyGrid" class="tax-grid" aria-live="polite"></div>
    </section>
  </main>

  <!-- About -->
  <section id="about" class="container">
    <div class="panel">
      <h2>About GRNâ€‘Atlas</h2>
      <p>GRNâ€‘Atlas is a curated, citable collection of gene regulatory networks harmonized across species (currently human and mouse) and data sources, including bulk RNAâ€‘seq, unpaired singleâ€‘cell (scRNAâ€‘seq + scATACâ€‘seq), and singleâ€‘cell multiome. Each dataset page links to Figshare for persistent DOIs and raw downloads.</p>
      <ul>
        <li>Metadata: number of edges, modalities, version, update date, tissues and cell types.</li>
        <li>Clear taxonomy: <b>Species â†’ Source type â†’ Tissue</b>.</li>
        <li>Static & GitHub Pages friendly (no backend required).</li>
      </ul>
    </div>
  </section>

  <!-- Cite -->
  <section id="cite" class="container">
    <div class="panel">
      <h2>How to cite</h2>
      <p>Please cite the GRNâ€‘Atlas portal and the specific Figshare dataset you download. Example:</p>
      <blockquote>
        <em>GRNâ€‘Atlas: a curated portal for gene regulatory networks across species and data sources.</em> Version {{YEAR}}. Available at: https://&lt;yourâ€‘githubâ€‘username&gt;.github.io/grnâ€‘atlas/.
      </blockquote>
    </div>
  </section>

  <!-- Contact -->
  <section id="contact" class="container">
    <div class="panel">
      <h2>Contact</h2>
      <p>Questions or dataset submissions: <a href="mailto:contact@grn-atlas.org">contact@grn-atlas.org</a>. GitHub issues welcome at <a href="#">@grn-atlas</a>.</p>
    </div>
  </section>

  <footer>
    <div class="foot">
      <div>
        <strong>GRNâ€‘Atlas</strong>
        <p class="muted">Open database for crossâ€‘species GRNs.</p>
      </div>
      <div>
        <div><strong>Quick links</strong></div>
        <a href="#catalog">Catalog</a>
        <a href="#about">About</a>
        <a href="#cite">Cite</a>
      </div>
      <div>
        <div><strong>Legal</strong></div>
        <a href="#">License (CC BY 4.0)</a>
        <a href="#">Privacy</a>
      </div>
    </div>
    <div class="copyright">Â© <span id="year"></span> GRNâ€‘Atlas. All rights reserved.</div>
  </footer>

  <script>
    // ======== Data model (edit here) ========
    // source: "bulk" | "unpaired" | "multiome"
    // species: "human" | "mouse"
    // modalities: e.g., ["RNA"], ["RNA","ATAC"]
    // cell_types: list of representative cell types (5â€‘15 recommended)
    const DATASETS = [
      {
        id: "H-Bulk-Heart-001",
        title: "Human bulk GRN â€” Heart",
        species: "human",
        source: "bulk",
        tissue: "heart",
        modalities: ["RNA"],
        edges: 123456,
        version: "v1.0",
        updated: "2025-08-01",
        figshare: "https://figshare.com/", // replace with DOI or project link
        cell_types: ["Cardiomyocyte","Fibroblast","Endothelial","Smooth muscle","Immune"]
      },
      {
        id: "H-Unpaired-Kidney-001",
        title: "Human unpaired GRN â€” Kidney (scRNA + scATAC)",
        species: "human",
        source: "unpaired",
        tissue: "kidney",
        modalities: ["RNA","ATAC"],
        edges: 98765,
        version: "v1.1",
        updated: "2025-07-15",
        figshare: "https://figshare.com/",
        cell_types: ["Proximal tubule","Loop of Henle","Intercalated","Principal","Endothelial","Fibroblast","Immune"]
      },
      {
        id: "H-Multiome-Lung-001",
        title: "Human multiome GRN â€” Lung",
        species: "human",
        source: "multiome",
        tissue: "lung",
        modalities: ["RNA","ATAC"],
        edges: 156732,
        version: "v1.0",
        updated: "2025-06-30",
        figshare: "https://figshare.com/",
        cell_types: ["AT2","AT1","Ciliated","Club","Basal","Endothelial","Alveolar macrophage"]
      },
      {
        id: "M-Bulk-Brain-001",
        title: "Mouse bulk GRN â€” Brain",
        species: "mouse",
        source: "bulk",
        tissue: "brain",
        modalities: ["RNA"],
        edges: 120345,
        version: "v1.0",
        updated: "2025-04-12",
        figshare: "https://figshare.com/",
        cell_types: ["Neuron","Astrocyte","Oligodendrocyte","Microglia","Endothelial"]
      },
      {
        id: "M-Unpaired-Heart-001",
        title: "Mouse unpaired GRN â€” Heart (scRNA + scATAC)",
        species: "mouse",
        source: "unpaired",
        tissue: "heart",
        modalities: ["RNA","ATAC"],
        edges: 101234,
        version: "v1.0",
        updated: "2025-05-09",
        figshare: "https://figshare.com/",
        cell_types: ["Cardiomyocyte","Fibroblast","Endothelial","Smooth muscle","Macrophage"]
      },
      {
        id: "M-Multiome-Liver-001",
        title: "Mouse multiome GRN â€” Liver",
        species: "mouse",
        source: "multiome",
        tissue: "liver",
        modalities: ["RNA","ATAC"],
        edges: 143210,
        version: "v1.0",
        updated: "2025-07-28",
        figshare: "https://figshare.com/",
        cell_types: ["Hepatocyte","Cholangiocyte","Kupffer","Stellate","Endothelial"]
      }
    ];

    // ======== Derive facets ========
    const facets = {
      tissues: Array.from(new Set(DATASETS.map(d => d.tissue))).sort(),
      species: Array.from(new Set(DATASETS.map(d => d.species))).sort(),
      sources: Array.from(new Set(DATASETS.map(d => d.source))).sort(),
    };

    // Populate tissue select
    const tissueSel = document.getElementById('tissue');
    facets.tissues.forEach(t => {
      const o=document.createElement('option');o.value=t;o.textContent=titleCase(t);tissueSel.appendChild(o);
    });

    // Stats
    document.getElementById('stat-datasets').textContent = DATASETS.length.toString();
    document.getElementById('stat-species').textContent = facets.species.length.toString();
    document.getElementById('stat-tissues').textContent = facets.tissues.length.toString();
    document.getElementById('year').textContent = new Date().getFullYear();

    // Filtering logic
    const S = {
      species: document.getElementById('species'),
      source:  document.getElementById('source'),
      tissue:  document.getElementById('tissue'),
      keyword: document.getElementById('keyword'),
    };
    document.getElementById('applyFilters').addEventListener('click', renderTaxonomy);
    document.getElementById('resetFilters').addEventListener('click', () => {S.species.value='';S.source.value='';S.tissue.value='';S.keyword.value='';renderTaxonomy()});

    function passFilters(d){
      if (S.species.value && d.species!==S.species.value) return false;
      if (S.source.value && d.source!==S.source.value) return false;
      if (S.tissue.value && d.tissue!==S.tissue.value) return false;
      if (S.keyword.value){
        const q=S.keyword.value.toLowerCase();
        const hay=[d.title,d.id,d.tissue,d.version,d.updated,(d.cell_types||[]).join(' ')].join(' ').toLowerCase();
        if (!hay.includes(q)) return false;
      }
      return true;
    }

    // Taxonomy rendering: species â†’ source â†’ tissue
    function renderTaxonomy(){
      const data = DATASETS.filter(passFilters);
      const bySpecies = groupBy(data, 'species');
      const grid = document.getElementById('taxonomyGrid');
      grid.innerHTML = '';

      Object.entries(bySpecies).forEach(([species, arr]) => {
        const bySource = groupBy(arr, 'source');
        const wrap = el('details', {class:'group', open:true});
        const sum = el('summary', {}, [
          el('span', {}, [titleCase(species), ' ', el('span',{class:'pill'}, [arr.length+" datasets"])])
        ]);
        wrap.appendChild(sum);
        const inner = el('div', {class:'group-inner'});

        Object.entries(bySource).forEach(([source, arr2]) => {
          const innerDetails = el('details', {class:'group', open:true});
          const labelMap = {bulk:'Bulk RNAâ€‘seq', unpaired:'Unpaired scRNAâ€‘seq & scATACâ€‘seq', multiome:'scâ€‘Multiome'};
          innerDetails.appendChild(el('summary', {}, [labelMap[source]||titleCase(source), ' ', el('span',{class:'pill'}, [arr2.length+" items"]) ]));
          const cards = el('div', {class:'grid'});

          // sort by tissue then title
          arr2.sort((a,b)=> (a.tissue.localeCompare(b.tissue) || a.title.localeCompare(b.title))); 

          arr2.forEach(d => cards.appendChild(datasetCard(d)));
          innerDetails.appendChild(el('div',{class:'group-inner'},[cards]));
          inner.appendChild(innerDetails);
        });

        wrap.appendChild(inner);
        grid.appendChild(wrap);
      });

      if (!grid.children.length){ grid.innerHTML = '<p class="muted" style="padding:6px 12px">No results. Try adjusting filters.</p>'; }
    }

    function datasetCard(d){
      const card = el('div', {class:'card', role:'article'});
      card.appendChild(el('h3', {}, [d.title]));
      card.appendChild(el('div',{class:'meta'},[
        tag(titleCase(d.tissue)),
        tag(titleCase(d.species)),
        tag((d.modalities||[]).join(' + ')),
        tag(`${formatEdges(d.edges)} edges`),
        tag(`${d.version}`),
        tag(`Updated ${d.updated}`)
      ]));

      const ct = el('div',{class:'meta', style:'margin-top:2px'}, [
        ...d.cell_types.slice(0,10).map(x=>tag(x)),
        d.cell_types.length>10? tag(`+${d.cell_types.length-10} more`) : null
      ].filter(Boolean));

      const row = el('div',{class:'row'},[
        el('div',{class:'left'},[ el('span',{class:'muted'},['Figshare:']) ]),
        el('div',{class:'download'},[
          el('a',{href:d.figshare,target:'_blank',rel:'noopener',class:'btn btn-primary','aria-label':`Download ${d.id} on Figshare`},['Download']),
          el('a',{href:`#`,class:'btn btn-secondary','aria-label':'View details (coming soon)'},['Details'])
        ])
      ]);

      card.appendChild(ct);
      card.appendChild(row);
      return card;
    }

    // Small helpers
    function titleCase(s){return s.charAt(0).toUpperCase()+s.slice(1)}
    function tag(text){return el('span',{class:'tag'},[text])}
    function formatEdges(n){if(n>=1e6) return (n/1e6).toFixed(1)+ 'M'; if(n>=1e3) return (n/1e3).toFixed(1)+'k'; return String(n)}
    function groupBy(arr,key){return arr.reduce((m,x)=>((m[x[key]]??=[]).push(x),m),{})}
    function el(tag,attrs={},children=[]) {const node=document.createElement(tag); for(const k in attrs){ if(attrs[k]==null) continue; node.setAttribute(k, attrs[k]); } (Array.isArray(children)?children:[children]).forEach(c=>{ if(c==null) return; node.appendChild(typeof c==="string"?document.createTextNode(c):c)}); return node}

    // Initial render
    renderTaxonomy();
  </script>
</body>
</html>

